"use strict";(globalThis.webpackChunkgutenberg=globalThis.webpackChunkgutenberg||[]).push([[8567],{"./packages/components/build-module/h-stack/component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _context__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/components/build-module/context/context-connect.js"),_view__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/components/build-module/view/component.js"),_hook__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/components/build-module/h-stack/hook.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,_context__WEBPACK_IMPORTED_MODULE_3__.Iq)((function UnconnectedHStack(props,forwardedRef){const hStackProps=(0,_hook__WEBPACK_IMPORTED_MODULE_1__.R)(props);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_view__WEBPACK_IMPORTED_MODULE_2__.Z,{...hStackProps,ref:forwardedRef})}),"HStack")},"./packages/components/build-module/h-stack/hook.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>useHStack});var use_context_system=__webpack_require__("./packages/components/build-module/context/use-context-system.js"),context_connect=__webpack_require__("./packages/components/build-module/context/context-connect.js"),component=__webpack_require__("./packages/components/build-module/flex/flex-item/component.js"),hook=__webpack_require__("./packages/components/build-module/flex/flex/hook.js"),values=__webpack_require__("./packages/components/build-module/utils/values.js");const H_ALIGNMENTS={bottom:{align:"flex-end",justify:"center"},bottomLeft:{align:"flex-end",justify:"flex-start"},bottomRight:{align:"flex-end",justify:"flex-end"},center:{align:"center",justify:"center"},edge:{align:"center",justify:"space-between"},left:{align:"center",justify:"flex-start"},right:{align:"center",justify:"flex-end"},stretch:{align:"stretch"},top:{align:"flex-start",justify:"center"},topLeft:{align:"flex-start",justify:"flex-start"},topRight:{align:"flex-start",justify:"flex-end"}},V_ALIGNMENTS={bottom:{justify:"flex-end",align:"center"},bottomLeft:{justify:"flex-end",align:"flex-start"},bottomRight:{justify:"flex-end",align:"flex-end"},center:{justify:"center",align:"center"},edge:{justify:"space-between",align:"center"},left:{justify:"center",align:"flex-start"},right:{justify:"center",align:"flex-end"},stretch:{align:"stretch"},top:{justify:"flex-start",align:"center"},topLeft:{justify:"flex-start",align:"flex-start"},topRight:{justify:"flex-start",align:"flex-end"}};var get_valid_children=__webpack_require__("./packages/components/build-module/utils/get-valid-children.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function useHStack(props){const{alignment="edge",children,direction,spacing=2,...otherProps}=(0,use_context_system.y)(props,"HStack"),align=function getAlignmentProps(alignment,direction="row"){if(!(0,values.Jf)(alignment))return{};const props="column"===direction?V_ALIGNMENTS:H_ALIGNMENTS;return alignment in props?props[alignment]:{align:alignment}}(alignment,direction),propsForFlex={children:(0,get_valid_children.W)(children).map(((child,index)=>{if((0,context_connect.H)(child,["Spacer"])){const childElement=child,_key=childElement.key||`hstack-${index}`;return(0,jsx_runtime.jsx)(component.Z,{isBlock:!0,...childElement.props},_key)}return child})),direction,justify:"center",...align,...otherProps,gap:spacing},{isColumn,...flexProps}=(0,hook.k)(propsForFlex);return flexProps}},"./packages/components/build-module/text-control/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var clsx__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs"),_wordpress_compose__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/compose/build-module/hooks/use-instance-id/index.js"),_wordpress_element__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/index.js"),_base_control__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/components/build-module/base-control/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const TextControl=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_4__.forwardRef)((function UnforwardedTextControl(props,ref){const{__nextHasNoMarginBottom,__next40pxDefaultSize=!1,label,hideLabelFromVision,value,help,id:idProp,className,onChange,type="text",...additionalProps}=props,id=(0,_wordpress_compose__WEBPACK_IMPORTED_MODULE_1__.Z)(TextControl,"inspector-text-control",idProp);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_base_control__WEBPACK_IMPORTED_MODULE_2__.ZP,{__nextHasNoMarginBottom,label,hideLabelFromVision,id,help,className,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{className:(0,clsx__WEBPACK_IMPORTED_MODULE_3__.Z)("components-text-control__input",{"is-next-40px-default-size":__next40pxDefaultSize}),type,id,value,onChange:event=>onChange(event.target.value),"aria-describedby":help?id+"__help":void 0,ref,...additionalProps})})})),__WEBPACK_DEFAULT_EXPORT__=TextControl},"./packages/components/build-module/utils/get-valid-children.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>getValidChildren});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function getValidChildren(children){return"string"==typeof children?[children]:_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.Children.toArray(children).filter((child=>(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(child)))}},"./packages/components/build-module/v-stack/component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>v_stack_component});var context_connect=__webpack_require__("./packages/components/build-module/context/context-connect.js"),component=__webpack_require__("./packages/components/build-module/view/component.js"),use_context_system=__webpack_require__("./packages/components/build-module/context/use-context-system.js"),hook=__webpack_require__("./packages/components/build-module/h-stack/hook.js");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const v_stack_component=(0,context_connect.Iq)((function UnconnectedVStack(props,forwardedRef){const vStackProps=function useVStack(props){const{expanded=!1,alignment="stretch",...otherProps}=(0,use_context_system.y)(props,"VStack");return(0,hook.R)({direction:"column",expanded,alignment,...otherProps})}(props);return(0,jsx_runtime.jsx)(component.Z,{...vStackProps,ref:forwardedRef})}),"VStack")},"./packages/compose/build-module/hooks/use-merge-refs/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>useMergeRefs});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function assignRef(ref,value){"function"==typeof ref?ref(value):ref&&ref.hasOwnProperty("current")&&(ref.current=value)}function useMergeRefs(refs){const element=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(),isAttached=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),didElementChange=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),previousRefs=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)([]),currentRefs=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(refs);return currentRefs.current=refs,(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{!1===didElementChange.current&&!0===isAttached.current&&refs.forEach(((ref,index)=>{const previousRef=previousRefs.current[index];ref!==previousRef&&(assignRef(previousRef,null),assignRef(ref,element.current))})),previousRefs.current=refs}),refs),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{didElementChange.current=!1})),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useCallback)((value=>{assignRef(element,value),didElementChange.current=!0,isAttached.current=null!==value;const refsToAssign=value?currentRefs.current:previousRefs.current;for(const ref of refsToAssign)assignRef(ref,value)}),[])}},"./packages/icons/build-module/library/plus.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})})},"./packages/dataviews/src/normalize-fields.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>normalizeFields});var select_control=__webpack_require__("./packages/components/build-module/select-control/index.js"),number_control=__webpack_require__("./packages/components/build-module/number-control/index.js"),react=__webpack_require__("./node_modules/react/index.js"),build_module=__webpack_require__("./packages/i18n/build-module/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function Edit({data,field,onChange}){var _field$getValue;const{id,label,description}=field,value=null!==(_field$getValue=field.getValue({item:data}))&&void 0!==_field$getValue?_field$getValue:"",onChangeControl=(0,react.useCallback)((newValue=>onChange((prevItem=>({...prevItem,[id]:newValue})))),[id,onChange]);if(field.elements){const elements=[{label:(0,build_module.__)("Select item"),value:""},...field.elements];return(0,jsx_runtime.jsx)(select_control.Z,{label,value,options:elements,onChange:onChangeControl,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})}return(0,jsx_runtime.jsx)(number_control.Z,{label,help:description,value,onChange:onChangeControl,__next40pxDefaultSize:!0})}Edit.displayName="Edit";const integer={sort:function sort(a,b,direction){return"asc"===direction?a-b:b-a},isValid:function isValid(value,context){if(""===value)return!1;if(!Number.isInteger(Number(value)))return!1;if(context?.elements){const validValues=context?.elements.map((f=>f.value));if(!validValues.includes(Number(value)))return!1}return!0},Edit};var text_control=__webpack_require__("./packages/components/build-module/text-control/index.js");function text_Edit({data,field,onChange}){const{id,label,placeholder}=field,value=field.getValue({item:data}),onChangeControl=(0,react.useCallback)((newValue=>onChange((prevItem=>({...prevItem,[id]:newValue})))),[id,onChange]);if(field.elements){const elements=[{label:(0,build_module.__)("Select item"),value:""},...field.elements];return(0,jsx_runtime.jsx)(select_control.Z,{label,value,options:elements,onChange:onChangeControl})}return(0,jsx_runtime.jsx)(text_control.Z,{label,placeholder,value:null!=value?value:"",onChange:onChangeControl,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})}text_Edit.displayName="Edit";const field_types_text={sort:function text_sort(valueA,valueB,direction){return"asc"===direction?valueA.localeCompare(valueB):valueB.localeCompare(valueA)},isValid:function text_isValid(value,context){if(context?.elements){const validValues=context?.elements?.map((f=>f.value));if(!validValues.includes(value))return!1}return!0},Edit:text_Edit};try{fieldtypes.displayName="fieldtypes",fieldtypes.__docgenInfo={description:"",displayName:"fieldtypes",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/dataviews/src/field-types/index.tsx#fieldtypes"]={docgenInfo:fieldtypes.__docgenInfo,name:"fieldtypes",path:"packages/dataviews/src/field-types/index.tsx#fieldtypes"})}catch(__react_docgen_typescript_loader_error){}function normalizeFields(fields){return fields.map((field=>{var _field$sort,_field$isValid;const fieldTypeDefinition=function getFieldTypeDefinition(type){return"integer"===type?integer:"text"===type?field_types_text:{sort:(a,b,direction)=>"number"==typeof a&&"number"==typeof b?"asc"===direction?a-b:b-a:"asc"===direction?a.localeCompare(b):b.localeCompare(a),isValid:(value,context)=>{if(context?.elements){const validValues=context?.elements?.map((f=>f.value));if(!validValues.includes(value))return!1}return!0},Edit:()=>null}}(field.type),getValue=field.getValue||(({item})=>item[field.id]),sort=null!==(_field$sort=field.sort)&&void 0!==_field$sort?_field$sort:function sort(a,b,direction){return fieldTypeDefinition.sort(getValue({item:a}),getValue({item:b}),direction)},isValid=null!==(_field$isValid=field.isValid)&&void 0!==_field$isValid?_field$isValid:function isValid(item,context){return fieldTypeDefinition.isValid(getValue({item}),context)},Edit=field.Edit||fieldTypeDefinition.Edit;return{...field,label:field.label||field.id,getValue,render:field.render||getValue,sort,isValid,Edit}}))}},"./packages/dataviews/src/components/dataform/stories/index.story.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,default:()=>index_story});var react=__webpack_require__("./node_modules/react/index.js"),component=__webpack_require__("./packages/components/build-module/v-stack/component.js"),normalize_fields=__webpack_require__("./packages/dataviews/src/normalize-fields.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function DataForm({data,fields,form,onChange}){const visibleFields=(0,react.useMemo)((()=>(0,normalize_fields.U)(fields.filter((({id})=>!!form.visibleFields?.includes(id))))),[fields,form.visibleFields]);return(0,jsx_runtime.jsx)(component.Z,{spacing:4,children:visibleFields.map((field=>(0,jsx_runtime.jsx)(field.Edit,{data,field,onChange},field.id)))})}DataForm.displayName="DataForm";try{dataform.displayName="dataform",dataform.__docgenInfo={description:"",displayName:"dataform",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"Item"}},fields:{defaultValue:null,description:"",name:"fields",required:!0,type:{name:"Field<Item>[]"}},form:{defaultValue:null,description:"",name:"form",required:!0,type:{name:"Form"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"Dispatch<SetStateAction<Item>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/dataviews/src/components/dataform/index.tsx#dataform"]={docgenInfo:dataform.__docgenInfo,name:"dataform",path:"packages/dataviews/src/components/dataform/index.tsx#dataform"})}catch(__react_docgen_typescript_loader_error){}const index_story={title:"DataViews/DataForm",component:DataForm,parameters:{sourceLink:"packages/dataviews/src/components/dataform",badges:[]}},fields=[{id:"title",label:"Title",type:"text"},{id:"order",label:"Order",type:"integer"},{id:"author",label:"Author",type:"integer",elements:[{value:1,label:"Jane"},{value:2,label:"John"}]},{id:"status",label:"Status",type:"text",elements:[{value:"draft",label:"Draft"},{value:"published",label:"Published"}]}],Default=()=>{const[post,setPost]=(0,react.useState)({title:"Hello, World!",order:2,author:1,status:"draft"});return(0,jsx_runtime.jsx)(DataForm,{data:post,fields,form:{visibleFields:["title","order","author","status"]},onChange:setPost})};Default.displayName="Default",Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"() => {\n  const [post, setPost] = useState({\n    title: 'Hello, World!',\n    order: 2,\n    author: 1,\n    status: 'draft'\n  });\n  const form = {\n    visibleFields: ['title', 'order', 'author', 'status']\n  };\n  return <DataForm data={post} fields={fields} form={form} onChange={setPost} />;\n}",...Default.parameters?.docs?.source}}}}}]);